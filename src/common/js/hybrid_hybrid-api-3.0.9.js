!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("YBB",[],t):"object"==typeof exports?exports.YBB=t():e.YBB=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(e){this.register=e}return e.prototype.getUUID=function(){return this.register.callHandler("device.base.getUUID")},e.prototype.selectImg=function(e){return this.register.callHandler("device.notification.selectImg",e).then(function(e){return"string"==typeof e?JSON.parse(e):e})},e.prototype.chooseImg=function(e){return this.register.callHandler("device.notification.chooseImage",e).then(function(e){return"string"==typeof e?JSON.parse(e):e})},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(e){this.register=e}return e.prototype.get=function(){return this.register.callHandler("device.location.get").then(function(e){return JSON.parse(e)})},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(e){this.register=e}return e.prototype.close=function(){return this.register.callHandler("biz.navigation.close")},e.prototype.hide=function(){return this.register.callHandler("biz.navigation.hide")},e.prototype.show=function(){return this.register.callHandler("biz.navigation.show")},e.prototype.setRightBtn=function(e,t){void 0===t&&(t={text:""});var n=this;return{click:function(r){n.register.listen("biz.navigation.setRightBtn",r,{show:e,control:!0,text:t.text,icon:t.icon})}}},e.prototype.setTitle=function(e){return this.register.callHandler("biz.navigation.setTitle",e)},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(e){this.register=e}return e.prototype.certification=function(e){var t=this;return new Promise(function(n,r){t.register.callHandler("user.certification",{appId:e}).then(function(e){n(e)}).catch(function(e){r(e)})})},e.prototype.authorization=function(e){var t=this;return new Promise(function(n,r){t.register.callHandler("user.authorization",{url:e}).then(function(e){1e4===e.code?n({state:e.data.state,code:e.data.code}):r(e.message)}).catch(function(e){r(e)})})},e.prototype.login=function(e){return this.register.callHandler("user.login",e)},e.prototype.eyePatternRecognition=function(e){return this.register.callHandler("user.eyePatternRecognition",e)},e}()},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var r;!function(e){e.QrCode="qrCode"}(r||(r={}));var i=function(){function e(e){this.modalCSS=".ybb-modal{line-height:16px;position:absolute;left:0;right:0;top:0;bottom:0;z-index:100000;background-color:rgba(0,0,0,.5)}.ybb-modal-content{width:260px;height:158px;background-color:#fff;border-radius:13px;overflow:hidden;text-align:center;position:absolute;left:50%;top:50%;margin-left:-130px;margin-top:-79px}.ybb-modal-title{padding:24px 0;font-size:16px;color:#333}#ybb-modal-btn-fail,#ybb-modal-btn-success{width:100%;display:block;text-align:center;background:0 0;border:none;outline:0}#ybb-modal-btn-fail:active,#ybb-modal-btn-success:active{background-color:#e9eaec}#ybb-modal-btn-success{border-top:.55px solid #b4b7bd;border-bottom:.5px solid #b4b7bd;padding-top:14px;padding-bottom:14px;font-size:17px;color:#31AB40}#ybb-modal-btn-fail{font-size:14px;color:#777;padding-top:15px;padding-bottom:15px}",this.modalHTML='<div class="ybb-modal-content"><div class="ybb-modal-title">请确认微信支付是否已完成</div><button type="button" id="ybb-modal-btn-success">已完成支付</button> <button type="button" id="ybb-modal-btn-fail">支付遇到问题，重新支付</button></div>',this.isAppend=!1,this.register=e}return e.prototype.openLink=function(e,t){return this.register.callHandler("biz.util.openLink",{url:e,params:t})},e.prototype.openSchemeURI=function(e,t){return this.register.callHandler("biz.util.openSchemeURI",{url:e,params:t})},e.prototype.share=function(e){return this.register.callHandler("biz.util.share",{arg:{titleStr:e.title,contentStr:e.content,imageStr:e.imageUrl,shareUrlStr:e.targetUrl}})},e.prototype.scan=function(e){return this.register.callHandler("biz.util.scan",{type:e}).then(function(e){return"string"==typeof e?JSON.parse(e):e})},e.prototype.pay=function(e,t){function n(e){for(var t=[1,9,0],n=(e.match(/\d+/g)||[]).map(function(e){return Number(e)||0}),r=0;r<t.length;r++)if(n[r]<t[r])return!1;return!0}var r=this,i=function(){return r.register.callHandler("biz.util.pay",{content:e,type:t}).then(function(e){var t=e;return"string"==typeof e&&(t=JSON.parse(e)),{errCode:t.errCode,resultDes:t.reultDes||t.resultDes,stateCode:t.stateCode,payPassword:t.payPassword}})};return"InputPassword"===t?new Promise(function(e){var t=setTimeout(function(){e({errCode:-1,stateCode:4,resultDes:"账户安全系统已升级，为了更好的用户体验，请更新到最新版本。"})},500);r.getAppVersion().then(function(r){n(r.appVersion)&&(clearTimeout(t),e(i()))})}):i()},e.prototype.getIP=function(){return new Promise(function(e,t){var n=document.body,r=document.createElement("script"),i=("ybb"+Math.random()).replace(/\./g,"");window[i]=function(n){1e4===n.code?e({clientIP:n.data}):t(new Error(n.message)),window[i]=null},r.onload=function(){n.removeChild(r)},r.onerror=function(){n.removeChild(r),t(new Error("接口调用失败"))},r.src="https://pay.cloudbae.cn:39260/api/v1/ip?callback="+i,n.appendChild(r)})},e.prototype.fingerprint=function(){return new Promise(function(e,t){if(window.Fingerprint2){return void(new window.Fingerprint2).get(function(t){e(t)})}var n=document.createElement("script");n.src="//wx.gtimg.com/wxpay_h5/fingerprint2.min.1.4.1.js",n.onload=function(){if(document.body.removeChild(n),window.Fingerprint2){(new window.Fingerprint2).get(function(t){e(t)})}else t(new Error("未找到 `Fingerprint2` 类"))},n.onerror=function(){document.body.removeChild(n),t(new Error("微信sdk下载失败"))},document.body.appendChild(n)})},e.prototype.showWeixinPayModal=function(){var e=this,t=document.body;if(!1===this.isAppend){var n=document.createElement("style");n.innerHTML=this.modalCSS,t.appendChild(n),this.isAppend=!0}return new Promise(function(n){var r=document.createElement("div");r.className="ybb-modal",r.innerHTML=e.modalHTML,t.appendChild(r);var i=r.getElementsByTagName("button")[0],o=r.getElementsByTagName("button")[1];i.onclick=function(){t.removeChild(r),n(!0)},o.onclick=function(){t.removeChild(r),n(!1)}})},e.prototype.getAppVersion=function(){return this.register.callHandler("biz.util.getAppVersion")},e}()},function(e,t,n){"use strict";var r=n(7);n.n(r);n.d(t,"a",function(){return o});var i=new Promise(function(e){var t=function(){e(window.WebViewJavascriptBridge)};if(window.WebViewJavascriptBridge)return e(window.WebViewJavascriptBridge);if(document.addEventListener("WebViewJavascriptBridgeReady",t,!1),window.WVJBCallbacks)return window.WVJBCallbacks.push(t);window.WVJBCallbacks=[t];var n=document.createElement("iframe");n.style.display="none",n.src="https://__bridge_loaded__",document.documentElement.appendChild(n),setTimeout(function(){document.documentElement.removeChild(n)})}),o=function(){function e(e){var t=this;this.bridgeWrapper=i.then(function(e){t.bridge=e}),this.rawValueCallback=e}return e.prototype.registerHandler=function(e){var t=this;return new Promise(function(n,r){var i=function(e,i){try{t.rawValueCallback&&t.rawValueCallback(e);var o="string"==typeof e?JSON.parse(e):e;"0"===o.errorCode?n(o.result):r(o.result)}catch(e){r(e)}i()};if(!t.bridge)return void t.bridgeWrapper.then(function(){t.bridge.registerHandler(e,i)});t.bridge.registerHandler(e,i)})},e.prototype.callHandler=function(e,t){var n=this;return new Promise(function(r,i){var o=function(e){try{n.rawValueCallback&&n.rawValueCallback(e);var t="string"==typeof e?JSON.parse(e):e;"0"===t.errorCode?r(t.result):i(t.result)}catch(e){i(e)}};if(!n.bridge)return void n.bridgeWrapper.then(function(){n.bridge.callHandler("dd.native.call",{handlerName:e,params:t||{}},o)});n.bridge.callHandler("dd.native.call",{handlerName:e,params:t||{}},o)})},e.prototype.listen=function(e,t,n){var r=this,i=function(e){try{r.rawValueCallback&&r.rawValueCallback(e);"0"===("string"==typeof e?JSON.parse(e):e).errorCode&&"function"==typeof t&&t()}catch(e){console&&console.log(e)}};if(!this.bridge)return void this.bridgeWrapper.then(function(){r.bridge.callHandler("dd.native.call",{handlerName:e,params:n||{}},i)});this.bridge.callHandler("dd.native.call",{handlerName:e,params:n||{}},i)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=n(0),o=n(1),a=n(2),c=n(3),u=n(4);n.d(t,"APIRegister",function(){return r.a}),n.d(t,"Device",function(){return i.a}),n.d(t,"Location",function(){return o.a}),n.d(t,"Navigation",function(){return a.a}),n.d(t,"User",function(){return c.a}),n.d(t,"Util",function(){return u.a}),n.d(t,"ScanType",function(){return u.b}),n.d(t,"Hybrid",function(){return s}),n.d(t,"hybrid",function(){return l}),n.d(t,"version",function(){return d});var s=function(){function e(e){var t=new r.a(e);this.device=new i.a(t),this.location=new o.a(t),this.navigation=new a.a(t),this.util=new u.a(t),this.user=new c.a(t)}return e}(),l=new s,d="3.0.9"},function(e,t){!function(){function e(e){if(m._messageHandler)throw new Error("WebViewJavascriptBridge.init called twice");m._messageHandler=e;var t=d;d=null;for(var n=0;n<t.length;n++)a(t[n])}function t(e,t){i({data:e},t)}function n(e,t){p[e]=t}function r(e,t,n){i({handlerName:e,data:t},n)}function i(e,t){if(t){var n="cb_"+h+++"_"+(new Date).getTime();b[n]=t,e.callbackId=n}l.push(e),s.src=f+"://"+g}function o(){var e=JSON.stringify(l);l=[],s.src=f+"://return/_fetchQueue/"+encodeURIComponent(e)}function a(e){setTimeout(function(){var t,n=JSON.parse(e);if(n.responseId){if(!(t=b[n.responseId]))return;t(n.responseData)}else{if(n.callbackId){var r=n.callbackId;t=function(e){i({responseId:r,responseData:e})}}var o=m._messageHandler;n.handlerName&&(o=p[n.handlerName]);try{o(n.data,t)}catch(e){"undefined"!=typeof console&&console.log("WebViewJavascriptBridge: WARNING: javascript handler threw.",n,e)}}})}function c(e){console.log(e),d&&d.length>0?d.push(e):a(e)}var u=navigator.userAgent;u.indexOf("Android")>-1||u.indexOf("Adr");if(!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&!window.WebViewJavascriptBridge){var s,l=[],d=[],p={},f="yy",g="__QUEUE_MESSAGE__/",b={},h=1,m=window.WebViewJavascriptBridge={init:e,send:t,registerHandler:n,callHandler:r,_fetchQueue:o,_handleMessageFromNative:c},v=document;!function(e){s=e.createElement("iframe"),s.style.display="none",e.documentElement.appendChild(s)}(v);var y=v.createEvent("Events");y.initEvent("WebViewJavascriptBridgeReady"),y.bridge=m,v.dispatchEvent(y)}}()}])});
//# sourceMappingURL=hybrid-api-3.0.9.js.map